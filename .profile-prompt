#!/bin/bash
# Check for shell type
if [ -z "$BASH_VERSION" ] && [ -z "$ZSH_VERSION" ]; then
    exit 0
fi

# If not running interactively, don't do anything
case $- in
    *i*) ;;
      *) return;;
esac

#-------------------------------------------------------------

# Adjust escape sequences for Zsh compatibility
if [ -n "$ZSH_VERSION" ]; then
    autoload -U colors && colors
    setopt PROMPT_SUBST
    ESCAPE_START="%{"
    ESCAPE_END="%}"
else
    ESCAPE_START="\["
    ESCAPE_END="\]"
fi

# Color definitions
Black="${ESCAPE_START}\e[0;30m${ESCAPE_END}"        # Black
Red="${ESCAPE_START}\e[0;31m${ESCAPE_END}"          # Red
Green="${ESCAPE_START}\e[0;32m${ESCAPE_END}"        # Green
Yellow="${ESCAPE_START}\e[0;33m${ESCAPE_END}"       # Yellow
Blue="${ESCAPE_START}\e[0;34m${ESCAPE_END}"         # Blue
Purple="${ESCAPE_START}\e[0;35m${ESCAPE_END}"       # Purple
Cyan="${ESCAPE_START}\e[0;36m${ESCAPE_END}"         # Cyan
White="${ESCAPE_START}\e[0;37m${ESCAPE_END}"        # White

# Bold
BBlack="${ESCAPE_START}\e[1;30m${ESCAPE_END}"       # Black
BRed="${ESCAPE_START}\e[1;31m${ESCAPE_END}"         # Red
BGreen="${ESCAPE_START}\e[1;32m${ESCAPE_END}"       # Green
BYellow="${ESCAPE_START}\e[1;33m${ESCAPE_END}"      # Yellow
BBlue="${ESCAPE_START}\e[1;34m${ESCAPE_END}"        # Blue
BPurple="${ESCAPE_START}\e[1;35m${ESCAPE_END}"      # Purple
BCyan="${ESCAPE_START}\e[1;36m${ESCAPE_END}"        # Cyan
BWhite="${ESCAPE_START}\e[1;37m${ESCAPE_END}"       # White

# Background
On_Black="${ESCAPE_START}\e[40m${ESCAPE_END}"       # Black
On_Red="${ESCAPE_START}\e[41m${ESCAPE_END}"         # Red
On_Green="${ESCAPE_START}\e[42m${ESCAPE_END}"       # Green
On_Yellow="${ESCAPE_START}\e[43m${ESCAPE_END}"      # Yellow
On_Blue="${ESCAPE_START}\e[44m${ESCAPE_END}"        # Blue
On_Purple="${ESCAPE_START}\e[45m${ESCAPE_END}"      # Purple
On_Cyan="${ESCAPE_START}\e[46m${ESCAPE_END}"        # Cyan
On_White="${ESCAPE_START}\e[47m${ESCAPE_END}"       # White
NC="${ESCAPE_START}\e[m${ESCAPE_END}"               # Color Reset

# Determine user type for prompt color
if [[ ${USER} == "root" ]]; then
    SU=${Red}           # User is root.
    PROMPT='#'
elif [[ ${USER} != $(logname) ]]; then
    SU=${BBlue}         # User is not login user.
    PROMPT='\$'
else
    SU=${BGreen}        # User is normal (well ... most of us are).
    PROMPT='\$'
fi

# Set prompt
if [ -n "$ZSH_VERSION" ]; then
    PS1="%{${SU}%}%#${PROMPT} "
else
    PS1="${ESCAPE_START}${SU}${ESCAPE_END}\#${PROMPT} "
fi

# Export and terminate with no color
export PS1="${PS1}${NC}"
